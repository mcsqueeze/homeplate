<div class="container-show">

  <div class="row">
    <div class="col-xs-6">

    <!-- meal card -->
      <div class="profile-card text-center">

        <!-- carousel -->
        <div id="carousel-show-pictures" class="carousel slide" data-ride="carousel" data-interval="false">


            <ol class="carousel-indicators">
              <% @meal.pictures.each_with_index do |pic, n| %>
                <li data-target='#MyCarousel' data-slide-to="#{n}" class="#{'active' if n == 0} carousel-pic"></li>
              <% end %>
            </ol>

          <div class="carousel-inner" role="listbox">
            <div class="item active" style="background: url(<%= cl_image_path(@meal.pictures.first.url) %>) no-repeat center center; background-size: cover; height: 100%; width: 100%;">
            </div>
            <% @meal.pictures.drop(1).each do |pic| %>
              <div class="item" style="background: url(<%= cl_image_path(pic.url) %>) no-repeat center center; background-size: cover; height: 100%; width: 100%;">
              </div>
            <% end %>
          </div>

          <a class="left carousel-control" href="#carousel-meal-pictures" role="button" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
          </a>

          <a class="right carousel-control" href="#carousel-meal-pictures" role="button" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
          </a>

        </div>

        <!-- meal details -->
        <div class="profile-info">
          <h1 class="hvr-underline-from-center"><%= @meal.title %><span><%= @meal.category %></span></h1>
              <div>
                    <div class="mealinfo">
                        <h2> <%= @meal.description %></h2>
                        <h4>Available servings:   <%= @meal.maxservings %></h4>
                        <h4>Price per portion:    <%= humanized_money_with_symbol(@meal.price) %></h4>

                        <!-- buttons and options -->

                        <% if user_signed_in? && current_user.usertype == 'cook'   %>
                            <div class= "button-show">
                            <%= link_to @meal.published ? "Unpublish" : "Publish!", publish_meal_path(@meal), method: :patch, class: "btn btn-success orderbtn" %>
                            </div>
                        <% end %>


                        <% unless @meal.published %>
                          <h3>This meal is not currently available</h3>
                        <% end %>

                        <% if @meal.user == current_user %>
                          <div class= "button-show">
                          <%= link_to 'Edit this meal', edit_meal_path(@meal), class: "btn btn-success" %>
                          </div>
                        <% end %>

                    </div>
                  <div>
                    <% if user_signed_in? && current_user.usertype == 'customer' %>
                    <h2>Please select number of servings:</h2>
                      <div>
                        <%= form_tag(meal_items_path(@meal), method: "post") do %>
                        <%= number_field_tag :quantity, nil, within: 0..@meal.maxservings %>
                            <div class= "button-show">
                            <%= submit_tag("Add to Order", class: "btn btn-success orderbtn") %>
                            </div>
                        <% end %>
                      </div>
                    <% end %>

                    <% if !user_signed_in? %>
                      <div class= "btn">
                        <%= link_to 'Sign in to order', new_user_session_path, class: "btn  btn-success" %>
                      </div>
                    <% end %>
                </div>
            </div>
        </div>
      </div>
    </div>

    <!-- cook profile -->
    <div class="col-xs-6">
      <div class="mealreviews">

        <div class="mealreviewsheaders">
          <h2> cook: <%= @cook.username.capitalize %></h2>
          <div class="mediumavatar">
          <%= cl_image_tag @cook.photo, height: 100, width: 100, crop: :fill, default_image: "circled-user" %>
          </div>
        </div>

        <% if @cook.cook_reviews.nil? %>
        <p>this cook has no review yet</p>
        <% else  %>

        <p>past reviews:</p>
        <% @cook.cook_reviews.each do |review|%>
          <ul>
             <li><%=review.rating %></li>
             <li><%=review.content %></li>
          </ul>
          <% end %>
        <% end %>
      </div>
    </div>

  </div>
</div>

